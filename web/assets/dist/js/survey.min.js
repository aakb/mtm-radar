!function(t){var n=function(n){return n.find(".question").map(function(){return{title:t(this).find(".title").html(),text:t(this).find(".text").html(),reply:t(this).find('input[type="radio"]:checked').val(),comment:t(this).find("textarea").val()}}).get()},e=function(e){var i=t(e),r=i.data("replies"),a=i.data("configuration"),o=i.find("section"),s=n(i),d=function(){var t=0;for(var n in a.rating)if(a.rating.hasOwnProperty(n)){var e=parseInt(n);e>t&&(t=e)}return t}(),u=function(){var t=0,n=/^#([0-9]+)/.exec(location.hash);return n&&n[1]&&(t=n[1]),t-1}(),c=o.length,l=new Chart(document.getElementById("chart"),{type:"radar",data:{labels:s.map(function(t,n){return n+1+". "}),datasets:[{label:"Answer",fill:!1,backgroundColor:"red",borderColor:"blue",pointRadius:8,data:[]}]},options:{legend:{display:!1},scale:{ticks:{min:0,max:d,stepSize:1},gridLines:{color:["#C00122","#FECE60","#7DBA6D","#22A136","#FFFFFF"]}}}}),f=function(t,n){l.data.datasets[0].data[t]=n,l.update()},h=function(){o.hide().eq(u).show().is(".question")?(t("#chart-wrapper").show(),t("#survey-info").hide()):(t("#chart-wrapper").hide(),t("#survey-info").show())},p=function(){t("form").validate({showErrors:function(){t("#validation-errors").toggle(this.errorList.length>0)}}),t("form").valid()&&(u<c&&u++,h())};r?r.forEach(function(t,n){f(n,t.value)}):(i.find(".survey-prev").on("click",function(){u>0&&(u--,h())}),i.find(".survey-next").on("click",p),i.find('input[type="radio"]').on("change",function(){var n=t(this).closest(".question").data("index");f(n,t(this).val())}),p())};t(function(){e(".survey")})}(jQuery);