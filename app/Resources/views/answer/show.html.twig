{% extends 'base.html.twig' %}

{% set survey = answer.survey %}

{% block body %}
	<h1>{{ survey.title }}</h1>

	{% if survey.description %}
		<div>{{ survey.description }}</div>
	{% endif %}

	<div id="chart-wrapper">
		<canvas id="chart"></canvas>
	</div>

	<div class="questions">
		{% for question in survey.questions %}
			{% set reply = answer.replies[loop.index0]|default(false) %}
			<div class="question">
				{{ loop.index }}. {{ question.title }}
				<div class="reply">
					{% if reply.value|default(false) %}
						{{ 'Reply: %reply%' | trans({'%reply%': reply.value}) }}
						{% if reply.comment|default(false) %}
							<div>{{ reply.comment }}</div>
						{% endif %}
					{% else %}
						{{ 'No reply' | trans }}
					{% endif %}
				</div>
			</div>
		{% endfor %}
	</div>
{% endblock %}

{% block stylesheets %}
	<style>
	 #chart-wrapper {
		 max-width: 500px;
		 height: 400px;
	 }
	</style>
{% endblock %}

{% block javascripts %}
	{{ parent() }}
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.min.js" integrity="sha256-SiHXR50l06UwJvHhFY4e5vzwq75vEHH+8fFNpkXePr0=" crossorigin="anonymous"></script>
	<script src="/survey.js"></script>
	<script src="{{ path('answer_show_data', {id: answer.id, callback: 'loadSurvey'}) }}"></script>
{% endblock %}
